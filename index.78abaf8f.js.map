{"mappings":"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","sources":["src/app.js"],"sourcesContent":["const searchForm = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet page = 1;\n\nsearchForm.addEventListener('submit', async e => {\n  e.preventDefault();\n  page = 1;\n  const searchQuery = e.target.searchQuery.value;\n  await fetchImages(searchQuery);\n});\nloadMoreBtn.addEventListener('click', async () => {\n  page++;\n  const searchQuery = searchForm.searchQuery.value;\n  await fetchImages(searchQuery, page);\n});\n\nasync function fetchImages(query, pageNumber = 1) {\n  const apiKey = '39441278-dab432af90fd5d2445b56ddfd';\n  const perPage = 40;\n  const apiUrl = `https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${pageNumber}&per_page=${perPage}`;\n\n  try {\n    const response = await fetch(apiUrl);\n    const data = await response.json();\n\n    if (pageNumber === 1) {\n      gallery.innerHTML = '';\n    }\n\n    if (data.hits.length === 0) {\n      alert('Przepraszamy, nie znaleziono obrazków pasujących do zapytania.');\n    } else {\n      data.hits.forEach(image => {\n        const card = createImageCard(image);\n        gallery.appendChild(card);\n      });\n      loadMoreBtn.style.display = 'block';\n      if (pageNumber * perPage >= data.totalHits) {\n        loadMoreBtn.style.display = 'none';\n        alert('Przepraszamy, osiągnąłeś koniec wyników wyszukiwania.');\n      }\n    }\n  } catch (error) {\n    console.error('Wystąpił błąd podczas pobierania obrazków:', error);\n    alert(\n      'Wystąpił błąd podczas pobierania obrazków. Spróbuj ponownie później.'\n    );\n  }\n}\nfunction createImageCard(image) {\n  const card = document.createElement('div');\n  card.classList.add('photo-card');\n\n  const img = document.createElement('img');\n  img.src = image.webformatURL;\n  img.alt = image.tags;\n  img.loading = 'lazy';\n\n  const info = document.createElement('div');\n  info.classList.add('info');\n\n  const likes = document.createElement('p');\n  likes.classList.add('info-item');\n  likes.innerHTML = `<b>Likes:</b> ${image.likes}`;\n\n  const views = document.createElement('p');\n  views.classList.add('info-item');\n  views.innerHTML = `<b>Views:</b> ${image.views}`;\n\n  const comments = document.createElement('p');\n  comments.classList.add('info-item');\n  comments.innerHTML = `<b>Comments:</b> ${image.comments}`;\n\n  const downloads = document.createElement('p');\n  downloads.classList.add('info-item');\n  downloads.innerHTML = `<b>Downloads:</b> ${image.downloads}`;\n\n  info.appendChild(likes);\n  info.appendChild(views);\n  info.appendChild(comments);\n  info.appendChild(downloads);\n\n  card.appendChild(img);\n  card.appendChild(info);\n\n  return card;\n}\n\nfunction displayImages(images) {\n  images.forEach(image => {\n    const card = createImageCard(image);\n    gallery.appendChild(card);\n  });\n}\n\nasync function searchImages(query, pageNumber) {\n  try {\n    const apiKey = '39441278-dab432af90fd5d2445b56ddfd';\n    const response = await fetch(\n      `https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${pageNumber}&per_page=${perPage}`\n    );\n\n    if (!response.ok) {\n      throw new Error('Network response was not ok');\n    }\n\n    const data = await response.json();\n\n    if (data.hits.length === 0) {\n      displayNoResults();\n    } else {\n      displayImages(data.hits);\n      if (page === 1) {\n        loadMoreBtn.style.display = 'block';\n      }\n    }\n\n    if (data.totalHits <= page * perPage) {\n      loadMoreBtn.style.display = 'none';\n      displayEndOfResults();\n    }\n  } catch (error) {\n    console.error('Error:', error);\n    displayError();\n  }\n}\n\nfunction displayNoResults() {\n  clearGallery();\n  loadMoreBtn.style.display = 'none';\n  Notiflix.Notify.failure(\n    'Sorry, there are no images matching your search query. Please try again.'\n  );\n}\n\nfunction displayEndOfResults() {\n  Notiflix.Notify.info(\n    \"We're sorry, but you've reached the end of search results.\"\n  );\n}\n\nfunction displayError() {\n  Notiflix.Notify.failure(\n    'An error occurred while fetching images. Please try again later.'\n  );\n}\ngallery.addEventListener('click', function (e) {\n  if (e.target.tagName === 'IMG') {\n    const modalImage = document.getElementById('modalImage');\n    const modalInfo = document.getElementById('modalInfo');\n    const imageCard = e.target.parentElement;\n    const image = {\n      url: e.target.src,\n      alt: e.target.alt,\n      likes: imageCard.querySelector('.info-item.likes').textContent,\n      views: imageCard.querySelector('.info-item.views').textContent,\n      comments: imageCard.querySelector('.info-item.comments').textContent,\n      downloads: imageCard.querySelector('.info-item.downloads').textContent,\n    };\n\n    displayImageInModal(image);\n    openModal();\n  }\n});\n\nconst modal = document.getElementById('imageModal');\nconst closeModalBtn = document.querySelector('.close');\n\ncloseModalBtn.addEventListener('click', closeModal);\nmodal.addEventListener('click', function (e) {\n  if (e.target === modal) {\n    closeModal();\n  }\n});\n\nfunction openModal() {\n  modal.style.display = 'block';\n}\n\nfunction closeModal() {\n  modal.style.display = 'none';\n}\n\nfunction displayImageInModal(image) {\n  const modalImage = document.getElementById('modalImage');\n  const modalInfo = document.getElementById('modalInfo');\n\n  modalImage.src = image.url;\n  modalImage.alt = image.alt;\n\n  modalInfo.innerHTML = `\n    <p><b>Likes:</b> ${image.likes}</p>\n    <p><b>Views:</b> ${image.views}</p>\n    <p><b>Comments:</b> ${image.comments}</p>\n    <p><b>Downloads:</b> ${image.downloads}</p>\n  `;\n}\n"],"names":["$6f40c3a58f594b58$var$searchForm","document","getElementById","$6f40c3a58f594b58$var$gallery","querySelector","$6f40c3a58f594b58$var$loadMoreBtn","$6f40c3a58f594b58$var$page","async","$6f40c3a58f594b58$var$fetchImages","query","pageNumber","apiUrl","response","fetch","data","json","innerHTML","hits","length","alert","forEach","image","card","$6f40c3a58f594b58$var$createImageCard","appendChild","style","display","totalHits","error","console","createElement","classList","add","img","src","webformatURL","alt","tags","loading","info","likes","views","comments","downloads","addEventListener","e","preventDefault","searchQuery","target","value","tagName","imageCard","parentElement","modalImage","modalInfo","url","$6f40c3a58f594b58$var$displayImageInModal","textContent","$6f40c3a58f594b58$var$modal","$6f40c3a58f594b58$var$closeModal"],"version":3,"file":"index.78abaf8f.js.map"}